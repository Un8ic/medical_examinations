<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–¥–µ–∞–ª—å–Ω—ã–π —á–µ–∫–∞–ø | –ú–æ–∏ –ú–µ–¥–ê–Ω–∞–ª–∏–∑—ã</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Roboto&display=swap" rel="stylesheet">
    <style>
        /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #4a90e2;
            --primary-dark: #357abd;
            --secondary-color: #7ed321;
            --accent-color: #ff6b6b;
            --light-bg: #f8f9fa;
            --card-bg: #ffffff;
            --text-dark: #2c3e50;
            --text-light: #7f8c8d;
            --border-radius: 12px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            width: 90%;
            max-width: 500px;
        }

        .notification {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            margin-bottom: 10px;
            animation: slideDown 0.3s ease;
            border-left: 4px solid #4a90e2;
        }

        .notification.success {
            border-left-color: #7ed321;
        }

        .notification.info {
            border-left-color: #4a90e2;
        }

        .notification.warning {
            border-left-color: #ff6b6b;
        }

        .notification-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
        }

        .notification-message {
            flex: 1;
            font-weight: 500;
        }

        .notification-close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #666;
            margin-left: 10px;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* –®–∞–ø–∫–∞ */
        header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header-nav {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin-bottom: 10px;
        }

        .back-link {
            position: absolute;
            left: 0;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border: 1px solid var(--primary-color);
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            background: var(--primary-color);
            color: white;
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .tagline {
            font-size: 1.2rem;
            color: var(--text-light);
            font-weight: 400;
        }

        /* –®–∞–≥–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ */
        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin: 40px 0;
            position: relative;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e0e0e0;
            z-index: 1;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .step.active .step-number {
            background: var(--primary-color);
            color: white;
        }

        .step-text {
            font-size: 0.9rem;
            color: #666;
            text-align: center;
        }

        .step.active .step-text {
            color: var(--primary-color);
            font-weight: 500;
        }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç —à–∞–≥–æ–≤ */
        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .parameters-card, .analyses-selection, .clinics-selection, .results-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
        }

        h2 {
            font-family: 'Montserrat', sans-serif;
            color: var(--text-dark);
            margin-bottom: 15px;
            font-size: 1.8rem;
        }

        .subtitle {
            color: var(--text-light);
            margin-bottom: 30px;
            font-size: 1rem;
        }

        /* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã */
        .parameters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .parameter-group {
            display: flex;
            flex-direction: column;
        }

        .parameter-group.full-width {
            grid-column: 1 / -1;
        }

        .parameter-group label {
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-dark);
            font-size: 1rem;
        }

        .parameter-input {
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .parameter-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }

        /* –ì—Ä—É–ø–ø—ã radio –∏ checkbox */
        .radio-group, .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .radio-label, .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 10px 0;
            transition: color 0.3s ease;
        }

        .radio-label:hover, .checkbox-label:hover {
            color: var(--primary-color);
        }

        .radio-custom, .checkmark {
            width: 20px;
            height: 20px;
            border: 2px solid #ddd;
            border-radius: 50%;
            margin-right: 12px;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .checkmark {
            border-radius: 4px;
        }

        .radio-label input, .checkbox-label input {
            display: none;
        }

        .radio-label input:checked + .radio-custom {
            border-color: var(--primary-color);
            background: var(--primary-color);
        }

        .radio-label input:checked + .radio-custom::after {
            content: '';
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .checkbox-label input:checked + .checkmark {
            border-color: var(--primary-color);
            background: var(--primary-color);
        }

        .checkbox-label input:checked + .checkmark::after {
            content: '‚úì';
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: bold;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            display: inline-block;
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--light-bg);
            color: var(--text-dark);
            border: 1px solid #ddd;
        }

        .btn-secondary:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 10px 20px;
            min-width: auto;
        }

        .btn-outline:hover {
            background: var(--primary-color);
            color: white;
        }

        /* –®–∞–≥ 2: –ê–Ω–∞–ª–∏–∑—ã */
        .selection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .total-price {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .selection-actions {
            display: flex;
            gap: 10px;
        }

        .checklist-category {
            margin-bottom: 40px;
        }

        .category-title {
            font-family: 'Montserrat', sans-serif;
            color: var(--text-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
            font-size: 1.3rem;
        }

        .checklist-item {
            margin-bottom: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: white;
        }

        .checklist-item:hover {
            border-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.1);
        }

        .checklist-item.recommended {
            border-left: 4px solid var(--secondary-color);
        }

        .checklist-label {
            display: flex;
            align-items: flex-start;
            padding: 20px;
            cursor: pointer;
            margin: 0;
            gap: 15px;
        }

        .checklist-label input {
            margin-top: 3px;
        }

        .analysis-info {
            flex: 1;
        }

        .analysis-name {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 6px;
            font-size: 1.1rem;
        }

        .analysis-description {
            color: var(--text-light);
            font-size: 0.95rem;
            margin-bottom: 4px;
        }

        .analysis-details {
            color: #666;
            font-size: 0.85rem;
            font-style: italic;
        }

        .analysis-price {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.1rem;
            white-space: nowrap;
        }

        /* –®–∞–≥ 3: –ö–ª–∏–Ω–∏–∫–∏ */
        .clinics-list {
            display: grid;
            gap: 20px;
            margin: 30px 0;
        }

        .clinic-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .clinic-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }

        .clinic-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 15px;
        }

        .clinic-logo {
            font-size: 2.5rem;
        }

        .clinic-info {
            flex: 1;
        }

        .clinic-name {
            font-family: 'Montserrat', sans-serif;
            color: var(--text-dark);
            margin-bottom: 5px;
            font-size: 1.3rem;
        }

        .clinic-rating {
            color: #666;
            font-size: 0.9rem;
        }

        .clinic-select {
            margin-left: auto;
        }

        .clinic-details {
            border-top: 1px solid #f0f0f0;
            padding-top: 20px;
        }

        .clinic-address, .clinic-phone, .clinic-hours {
            margin-bottom: 8px;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .clinic-features {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }

        .feature-tag {
            background: #e3f2fd;
            color: var(--primary-color);
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .clinic-discount {
            background: #fff3cd;
            color: #856404;
            padding: 12px 16px;
            border-radius: 6px;
            margin: 15px 0;
            font-size: 0.9rem;
            border-left: 4px solid #ffc107;
        }

        .clinic-delivery {
            color: var(--text-light);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* –®–∞–≥ 4: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã */
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .results-summary, .results-actions {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
        }

        .results-summary h3, .results-actions h3 {
            margin-bottom: 20px;
            color: var(--text-dark);
            font-family: 'Montserrat', sans-serif;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #e0e0e0;
        }

        .summary-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .results-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .results-actions .btn {
            width: 100%;
        }

        .selected-analyses {
            margin-top: 30px;
        }

        .analyses-list {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .analysis-item {
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border-left: 4px solid var(--secondary-color);
        }

        .analysis-item h4 {
            color: var(--text-dark);
            margin-bottom: 8px;
            font-family: 'Montserrat', sans-serif;
        }

        .analysis-item p {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        .final-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .analysis-price-final {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —à–∞–≥–∞–º–∏ */
        .step-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 15px;
        }

        .step-navigation .btn {
            min-width: 150px;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .header-nav {
                flex-direction: column;
                gap: 15px;
            }
            
            .back-link {
                position: static;
                align-self: flex-start;
            }
            
            .parameters-card, .analyses-selection, .clinics-selection, .results-card {
                padding: 25px;
            }
            
            .progress-steps {
                flex-direction: column;
                gap: 20px;
            }
            
            .progress-steps::before {
                display: none;
            }
            
            .step {
                flex-direction: row;
                text-align: left;
            }
            
            .step-number {
                margin-right: 15px;
                margin-bottom: 0;
            }
            
            .parameters-grid {
                grid-template-columns: 1fr;
            }
            
            .selection-header {
                flex-direction: column;
                text-align: center;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .checklist-label {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .analysis-price {
                margin-left: 0;
            }
            
            .clinic-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .clinic-select {
                margin-left: 0;
                margin-top: 10px;
            }
            
            .step-navigation {
                flex-direction: column;
            }
            
            .step-navigation .btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .tagline {
                font-size: 1rem;
            }
            
            .parameters-card, .analyses-selection, .clinics-selection, .results-card {
                padding: 20px;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 0.95rem;
                min-width: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="notification-container" class="notification-container"></div>

    <div class="container">
        <header>
            <div class="header-nav">
                <a href="main.html" class="back-link">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                <h1>–ò–¥–µ–∞–ª—å–Ω—ã–π —á–µ–∫–∞–ø</h1>
            </div>
            <p class="tagline">–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å —Ä–∞—Å—á–µ—Ç–æ–º —Å—Ç–æ–∏–º–æ—Å—Ç–∏</p>
        </header>

        <main class="main-content">
            <!-- –®–∞–≥–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ -->
            <div class="progress-steps">
                <div class="step active" data-step="1">
                    <span class="step-number">1</span>
                    <span class="step-text">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</span>
                </div>
                <div class="step" data-step="2">
                    <span class="step-number">2</span>
                    <span class="step-text">–ê–Ω–∞–ª–∏–∑—ã</span>
                </div>
                <div class="step" data-step="3">
                    <span class="step-number">3</span>
                    <span class="step-text">–ö–ª–∏–Ω–∏–∫–∞</span>
                </div>
                <div class="step" data-step="4">
                    <span class="step-number">4</span>
                    <span class="step-text">–†–µ–∑—É–ª—å—Ç–∞—Ç</span>
                </div>
            </div>

            <!-- –®–∞–≥ 1: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
            <div id="step-1" class="step-content active">
                <div class="parameters-card">
                    <h2>–í–∞—à–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h2>
                    <p class="subtitle">–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –ø–æ–¥–æ–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∞–Ω–∞–ª–∏–∑–æ–≤</p>

                    <div class="parameters-grid">
                        <div class="parameter-group">
                            <label>–ü–æ–ª</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="gender" value="male" checked>
                                    <span class="radio-custom"></span>
                                    –ú—É–∂—Å–∫–æ–π
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="gender" value="female">
                                    <span class="radio-custom"></span>
                                    –ñ–µ–Ω—Å–∫–∏–π
                                </label>
                            </div>
                        </div>

                        <div class="parameter-group">
                            <label for="age">–í–æ–∑—Ä–∞—Å—Ç</label>
                            <input type="number" id="age" min="18" max="80" value="30" class="parameter-input">
                        </div>

                        <div class="parameter-group">
                            <label for="height">–†–æ—Å—Ç (—Å–º)</label>
                            <input type="number" id="height" min="140" max="220" value="170" class="parameter-input">
                        </div>

                        <div class="parameter-group">
                            <label for="weight">–í–µ—Å (–∫–≥)</label>
                            <input type="number" id="weight" min="40" max="200" value="70" class="parameter-input">
                        </div>

                        <div class="parameter-group full-width">
                            <label>–§–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="risk_factors" value="smoking">
                                    <span class="checkbox-custom"></span>
                                    –ö—É—Ä–µ–Ω–∏–µ
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="risk_factors" value="alcohol">
                                    <span class="checkbox-custom"></span>
                                    –†–µ–≥—É–ª—è—Ä–Ω–æ–µ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="risk_factors" value="stress">
                                    <span class="checkbox-custom"></span>
                                    –•—Ä–æ–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç—Ä–µ—Å—Å
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="risk_factors" value="sedentary">
                                    <span class="checkbox-custom"></span>
                                    –°–∏–¥—è—á–∏–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="risk_factors" value="family_history">
                                    <span class="checkbox-custom"></span>
                                    –ù–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è
                                </label>
                            </div>
                        </div>

                        <div class="parameter-group full-width">
                            <label>–¶–µ–ª–∏ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="goals" value="prevention" checked>
                                    <span class="checkbox-custom"></span>
                                    –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="goals" value="weight">
                                    <span class="checkbox-custom"></span>
                                    –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Å–∞
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="goals" value="hormones">
                                    <span class="checkbox-custom"></span>
                                    –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–∞
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="goals" value="heart">
                                    <span class="checkbox-custom"></span>
                                    –ó–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–¥—Ü–∞
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="goals" value="vitamins">
                                    <span class="checkbox-custom"></span>
                                    –£—Ä–æ–≤–µ–Ω—å –≤–∏—Ç–∞–º–∏–Ω–æ–≤
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="step-navigation">
                        <div></div> <!-- –ü—É—Å—Ç–æ–π div –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è -->
                        <button class="btn btn-primary next-step" data-next="2">–î–∞–ª–µ–µ ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- –®–∞–≥ 2: –í—ã–±–æ—Ä –∞–Ω–∞–ª–∏–∑–æ–≤ -->
            <div id="step-2" class="step-content">
                <div class="analyses-selection">
                    <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∞–Ω–∞–ª–∏–∑—ã</h2>
                    <p class="subtitle">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</p>

                    <div class="selection-header">
                        <div class="total-price">
                            –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <span id="total-cost">0</span> ‚ÇΩ
                        </div>
                        <div class="selection-actions">
                            <button class="btn btn-outline" id="select-all">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
                            <button class="btn btn-outline" id="deselect-all">–°–Ω—è—Ç—å –≤—Å–µ</button>
                        </div>
                    </div>

                    <div id="analyses-checklist" class="checklist">
                        <!-- –ê–Ω–∞–ª–∏–∑—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>

                    <div class="step-navigation">
                        <button class="btn btn-secondary prev-step" data-prev="1">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="btn btn-primary next-step" data-next="3">–î–∞–ª–µ–µ ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- –®–∞–≥ 3: –í—ã–±–æ—Ä –∫–ª–∏–Ω–∏–∫–∏ -->
            <div id="step-3" class="step-content">
                <div class="clinics-selection">
                    <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∏–Ω–∏–∫—É</h2>
                    <p class="subtitle">–ö–ª–∏–Ω–∏–∫–∏ –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞ —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏</p>

                    <div class="clinics-list" id="clinics-list">
                        <!-- –ö–ª–∏–Ω–∏–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>

                    <div class="step-navigation">
                        <button class="btn btn-secondary prev-step" data-prev="2">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="btn btn-primary next-step" data-next="4">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏—Ç–æ–≥ ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- –®–∞–≥ 4: –ò—Ç–æ–≥–∏ -->
            <div id="step-4" class="step-content">
                <div class="results-card">
                    <h2>–í–∞—à –∏–¥–µ–∞–ª—å–Ω—ã–π —á–µ–∫–∞–ø –≥–æ—Ç–æ–≤!</h2>
                    
                    <div class="results-grid">
                        <div class="results-summary">
                            <h3>–°–≤–æ–¥–∫–∞</h3>
                            <div class="summary-item">
                                <span>–í—ã–±—Ä–∞–Ω–Ω—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤:</span>
                                <span id="selected-count">0</span>
                            </div>
                            <div class="summary-item">
                                <span>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                                <span id="final-cost">0</span> ‚ÇΩ
                            </div>
                            <div class="summary-item">
                                <span>–í—ã–±—Ä–∞–Ω–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞:</span>
                                <span id="selected-clinic">-</span>
                            </div>
                            <div class="summary-item">
                                <span>–í—Ä–µ–º—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:</span>
                                <span>1-2 –¥–Ω—è</span>
                            </div>
                        </div>

                        <div class="results-actions">
                            <h3>–î–µ–π—Å—Ç–≤–∏—è</h3>
                            <button class="btn btn-primary" id="print-plan">
                                üìÑ –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –ø–ª–∞–Ω
                            </button>
                            <button class="btn btn-secondary" id="save-pdf">
                                üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å PDF
                            </button>
                        </div>
                    </div>

                    <div class="selected-analyses">
                        <h3>–í—ã–±—Ä–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã</h3>
                        <div id="final-analyses-list" class="analyses-list">
                            <!-- –°–ø–∏—Å–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤ -->
                        </div>
                    </div>

                    <div class="step-navigation">
                        <button class="btn btn-secondary" id="start-over">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏–∑–æ–≤ –¥–ª—è —á–µ–∫-–ª–∏—Å—Ç–∞ (—Ü–µ–Ω—ã –¥–ª—è –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞)
        const checkupAnalyses = {
            basic: [
                {
                    id: 'blood_general',
                    name: '–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏',
                    category: 'basic',
                    price: 450,
                    description: '–û—Ü–µ–Ω–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –∫—Ä–æ–≤–∏',
                    details: '–í–∫–ª—é—á–∞–µ—Ç –≥–µ–º–æ–≥–ª–æ–±–∏–Ω, —ç—Ä–∏—Ç—Ä–æ—Ü–∏—Ç—ã, –ª–µ–π–∫–æ—Ü–∏—Ç—ã, —Ç—Ä–æ–º–±–æ—Ü–∏—Ç—ã, –°–û–≠',
                    recommended: true
                },
                {
                    id: 'blood_bio',
                    name: '–ë–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏',
                    category: 'basic',
                    price: 1890,
                    description: '–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ä–≥–∞–Ω–æ–≤',
                    details: '–ê–õ–¢, –ê–°–¢, –±–∏–ª–∏—Ä—É–±–∏–Ω, –∫—Ä–µ–∞—Ç–∏–Ω–∏–Ω, –º–æ—á–µ–≤–∏–Ω–∞, –≥–ª—é–∫–æ–∑–∞, –æ–±—â–∏–π –±–µ–ª–æ–∫',
                    recommended: true
                },
                {
                    id: 'urine_general',
                    name: '–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –º–æ—á–∏',
                    category: 'basic',
                    price: 350,
                    description: '–û—Ü–µ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ—á–µ–≤—ã–¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã',
                    details: '–¶–≤–µ—Ç, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, –ø–ª–æ—Ç–Ω–æ—Å—Ç—å, –±–µ–ª–æ–∫, –≥–ª—é–∫–æ–∑–∞, –ª–µ–π–∫–æ—Ü–∏—Ç—ã',
                    recommended: true
                }
            ],

            hormones: [
                {
                    id: 'tsh',
                    name: '–¢–¢–ì (—Ç–∏—Ä–µ–æ—Ç—Ä–æ–ø–Ω—ã–π –≥–æ—Ä–º–æ–Ω)',
                    category: 'hormones',
                    price: 520,
                    description: '–û—Ü–µ–Ω–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —â–∏—Ç–æ–≤–∏–¥–Ω–æ–π –∂–µ–ª–µ–∑—ã',
                    details: '–û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–≥—É–ª—è—Ç–æ—Ä —Ä–∞–±–æ—Ç—ã —â–∏—Ç–æ–≤–∏–¥–Ω–æ–π –∂–µ–ª–µ–∑—ã',
                    recommended: false
                },
                {
                    id: 'cortisol',
                    name: '–ö–æ—Ä—Ç–∏–∑–æ–ª',
                    category: 'hormones',
                    price: 580,
                    description: '–ì–æ—Ä–º–æ–Ω —Å—Ç—Ä–µ—Å—Å–∞',
                    details: '–û—Ü–µ–Ω–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–¥–ø–æ—á–µ—á–Ω–∏–∫–æ–≤',
                    recommended: false
                },
                {
                    id: 'testosterone',
                    name: '–¢–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω –æ–±—â–∏–π',
                    category: 'hormones',
                    price: 610,
                    description: '–ú—É–∂—Å–∫–æ–π –ø–æ–ª–æ–≤–æ–π –≥–æ—Ä–º–æ–Ω',
                    details: '–í–∞–∂–µ–Ω –¥–ª—è –æ–±–æ–∏—Ö –ø–æ–ª–æ–≤',
                    recommended: false
                },
                {
                    id: 'estradiol',
                    name: '–≠—Å—Ç—Ä–∞–¥–∏–æ–ª',
                    category: 'hormones',
                    price: 590,
                    description: '–ñ–µ–Ω—Å–∫–∏–π –ø–æ–ª–æ–≤–æ–π –≥–æ—Ä–º–æ–Ω',
                    details: '–û—Ü–µ–Ω–∫–∞ —Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è',
                    recommended: false
                }
            ],

            vitamins: [
                {
                    id: 'vitamin_d',
                    name: '–í–∏—Ç–∞–º–∏–Ω D',
                    category: 'vitamins',
                    price: 1750,
                    description: '25-–û–ù –í–∏—Ç–∞–º–∏–Ω D',
                    details: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è –∏–º–º—É–Ω–∏—Ç–µ—Ç–∞ –∏ –∫–æ—Å—Ç–µ–π',
                    recommended: true
                },
                {
                    id: 'vitamin_b12',
                    name: '–í–∏—Ç–∞–º–∏–Ω B12',
                    category: 'vitamins',
                    price: 890,
                    description: '–¶–∏–∞–Ω–æ–∫–æ–±–∞–ª–∞–º–∏–Ω',
                    details: '–í–ª–∏—è–µ—Ç –Ω–∞ –∫—Ä–æ–≤–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ –∏ –Ω–µ—Ä–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É',
                    recommended: false
                },
                {
                    id: 'ferritin',
                    name: '–§–µ—Ä—Ä–∏—Ç–∏–Ω',
                    category: 'vitamins',
                    price: 620,
                    description: '–ú–∞—Ä–∫–µ—Ä –∑–∞–ø–∞—Å–æ–≤ –∂–µ–ª–µ–∑–∞',
                    details: '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –∂–µ–ª–µ–∑–∞ –≤ –æ—Ä–≥–∞–Ω–∏–∑–º–µ',
                    recommended: true
                }
            ],

            special: [
                {
                    id: 'hba1c',
                    name: '–ì–ª–∏–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–µ–º–æ–≥–ª–æ–±–∏–Ω',
                    category: 'special',
                    price: 720,
                    description: '–ö–æ–Ω—Ç—Ä–æ–ª—å —É—Ä–æ–≤–Ω—è —Å–∞—Ö–∞—Ä–∞',
                    details: '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã –∑–∞ 3 –º–µ—Å—è—Ü–∞',
                    recommended: true
                },
                {
                    id: 'cholesterol',
                    name: '–õ–∏–ø–∏–¥–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å',
                    category: 'special',
                    price: 850,
                    description: '–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–∞ –∞—Ç–µ—Ä–æ—Å–∫–ª–µ—Ä–æ–∑–∞',
                    details: '–•–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω –æ–±—â–∏–π, –õ–ü–ù–ü, –õ–ü–í–ü, —Ç—Ä–∏–≥–ª–∏—Ü–µ—Ä–∏–¥—ã',
                    recommended: true
                },
                {
                    id: 'crp',
                    name: '–°-—Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π –±–µ–ª–æ–∫',
                    category: 'special',
                    price: 480,
                    description: '–ú–∞—Ä–∫–µ—Ä –≤–æ—Å–ø–∞–ª–µ–Ω–∏—è',
                    details: '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤–æ—Å–ø–∞–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤',
                    recommended: false
                },
                {
                    id: 'ecg',
                    name: '–≠–ö–ì (—ç–ª–µ–∫—Ç—Ä–æ–∫–∞—Ä–¥–∏–æ–≥—Ä–∞–º–º–∞)',
                    category: 'special',
                    price: 950,
                    description: '–û—Ü–µ–Ω–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–¥—Ü–∞',
                    details: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–¥—Ü–∞',
                    recommended: true
                },
                {
                    id: 'ultrasound',
                    name: '–£–ó–ò –æ—Ä–≥–∞–Ω–æ–≤ –±—Ä—é—à–Ω–æ–π –ø–æ–ª–æ—Å—Ç–∏',
                    category: 'special',
                    price: 2200,
                    description: '–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –£–ó–ò',
                    details: '–ü–µ—á–µ–Ω—å, –∂–µ–ª—á–Ω—ã–π –ø—É–∑—ã—Ä—å, –ø–æ–¥–∂–µ–ª—É–¥–æ—á–Ω–∞—è, —Å–µ–ª–µ–∑–µ–Ω–∫–∞, –ø–æ—á–∫–∏',
                    recommended: true
                }
            ]
        };

        // –î–∞–Ω–Ω—ã–µ –∫–ª–∏–Ω–∏–∫ –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞
        const novosibirskClinics = [
            {
                id: 'invitro',
                name: '–ò–ù–í–ò–¢–†–û',
                logo: 'üè•',
                rating: 4.8,
                reviews: 1247,
                address: '—É–ª. –õ–µ–Ω–∏–Ω–∞, 12',
                phone: '+7 (383) 123-45-67',
                workingHours: '–ø–Ω-–≤—Å: 7:00-20:00',
                features: ['–û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å', '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–Ω–ª–∞–π–Ω', '–°—Ä–æ—á–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã'],
                discount: '–ü—Ä–∏ –µ–¥–∏–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–¥–∞—á–µ 5+ –∞–Ω–∞–ª–∏–∑–æ–≤ - —Å–∫–∏–¥–∫–∞ 10%',
                deliveryTime: '1-2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è'
            },
            {
                id: 'gemotest',
                name: '–ì–µ–º–æ—Ç–µ—Å—Ç',
                logo: 'ü©∫',
                rating: 4.6,
                reviews: 893,
                address: '–ø—Ä. –ö–∞—Ä–ª–∞ –ú–∞—Ä–∫—Å–∞, 45',
                phone: '+7 (383) 234-56-78',
                workingHours: '–ø–Ω-–ø—Ç: 8:00-19:00, —Å–±-–≤—Å: 8:00-17:00',
                features: ['–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ', '–î–µ—Ç—Å–∫–∏–µ –∑–∞–±–æ—Ä—ã', '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞'],
                discount: '–°–∫–∏–¥–∫–∞ 15% –ø–æ –∫–∞—Ä—Ç–µ –∑–¥–æ—Ä–æ–≤—å—è',
                deliveryTime: '1-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è'
            },
            {
                id: 'citilab',
                name: '–¶–ò–¢–ò–õ–ê–ë',
                logo: 'üî¨',
                rating: 4.7,
                reviews: 756,
                address: '—É–ª. –ö–∏—Ä–æ–≤–∞, 32',
                phone: '+7 (383) 345-67-89',
                workingHours: '–∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ',
                features: ['–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω—ã–π –∑–∞–±–æ—Ä', '–°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è', '–°–ú–°-–æ–ø–æ–≤–µ—â–µ–Ω–∏—è'],
                discount: '–ü–µ—Ä–≤–∏—á–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º —Å–∫–∏–¥–∫–∞ 20%',
                deliveryTime: '1-2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è'
            }
        ];

        // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —á–µ–∫-–ª–∏—Å—Ç–∞
        class CheckupChecklist {
            constructor() {
                this.selectedAnalyses = new Set();
                this.selectedClinic = null;
                this.userParams = {};
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadAnalysesChecklist();
                this.loadClinics();
                
                setTimeout(() => {
                    this.showNotification('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ —á–µ–∫–∞–ø–∞! –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.', 'info');
                }, 1000);
            }

            setupEventListeners() {
                document.querySelectorAll('.next-step').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const nextStep = e.target.dataset.next;
                        this.goToStep(nextStep);
                    });
                });

                document.querySelectorAll('.prev-step').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const prevStep = e.target.dataset.prev;
                        this.goToStep(prevStep);
                    });
                });

                document.getElementById('select-all').addEventListener('click', () => {
                    this.selectAllAnalyses();
                });

                document.getElementById('deselect-all').addEventListener('click', () => {
                    this.deselectAllAnalyses();
                });

                document.getElementById('start-over').addEventListener('click', () => {
                    this.startOver();
                });

                document.getElementById('print-plan').addEventListener('click', () => {
                    this.printPlan();
                });

                document.getElementById('save-pdf').addEventListener('click', () => {
                    this.savePDF();
                });
            }

            goToStep(stepNumber) {
                document.querySelectorAll('.step-content').forEach(step => {
                    step.classList.remove('active');
                });

                document.getElementById(`step-${stepNumber}`).classList.add('active');

                document.querySelectorAll('.step').forEach(step => {
                    step.classList.remove('active');
                    if (parseInt(step.dataset.step) <= stepNumber) {
                        step.classList.add('active');
                    }
                });

                if (stepNumber === '2') {
                    this.updateRecommendedAnalyses();
                    this.showNotification('–ù–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º—ã –ø–æ–¥–æ–±—Ä–∞–ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∞–Ω–∞–ª–∏–∑—ã.', 'info');
                } else if (stepNumber === '3') {
                    this.showNotification('–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∏–Ω–∏–∫—É –¥–ª—è —Å–¥–∞—á–∏ –∞–Ω–∞–ª–∏–∑–æ–≤.', 'info');
                } else if (stepNumber === '4') {
                    this.showFinalResults();
                    this.showNotification('–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω —á–µ–∫–∞–ø–∞ –≥–æ—Ç–æ–≤!', 'success');
                }
            }

            loadAnalysesChecklist() {
                const container = document.getElementById('analyses-checklist');
                container.innerHTML = '';

                Object.entries(checkupAnalyses).forEach(([category, analyses]) => {
                    const categorySection = document.createElement('div');
                    categorySection.className = 'checklist-category';
                    
                    const categoryTitle = document.createElement('h3');
                    categoryTitle.className = 'category-title';
                    categoryTitle.textContent = this.getCategoryName(category);
                    categorySection.appendChild(categoryTitle);

                    analyses.forEach(analysis => {
                        const analysisItem = this.createAnalysisItem(analysis);
                        categorySection.appendChild(analysisItem);
                    });

                    container.appendChild(categorySection);
                });

                this.updateTotalCost();
            }

            createAnalysisItem(analysis) {
                const item = document.createElement('div');
                item.className = `checklist-item ${analysis.recommended ? 'recommended' : ''}`;
                item.innerHTML = `
                    <label class="checklist-label">
                        <input type="checkbox" value="${analysis.id}" 
                               ${analysis.recommended ? 'checked' : ''}
                               data-price="${analysis.price}">
                        <div class="analysis-info">
                            <div class="analysis-name">${analysis.name}</div>
                            <div class="analysis-description">${analysis.description}</div>
                            <div class="analysis-details">${analysis.details}</div>
                        </div>
                        <div class="analysis-price">${analysis.price} ‚ÇΩ</div>
                    </label>
                `;

                const checkbox = item.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        this.selectedAnalyses.add(analysis.id);
                    } else {
                        this.selectedAnalyses.delete(analysis.id);
                    }
                    this.updateTotalCost();
                });

                if (analysis.recommended) {
                    this.selectedAnalyses.add(analysis.id);
                }

                return item;
            }

            loadClinics() {
                const container = document.getElementById('clinics-list');
                container.innerHTML = '';

                novosibirskClinics.forEach(clinic => {
                    const clinicCard = document.createElement('div');
                    clinicCard.className = 'clinic-card';
                    clinicCard.innerHTML = `
                        <div class="clinic-header">
                            <div class="clinic-logo">${clinic.logo}</div>
                            <div class="clinic-info">
                                <h3 class="clinic-name">${clinic.name}</h3>
                                <div class="clinic-rating">
                                    ‚≠ê ${clinic.rating} (${clinic.reviews} –æ—Ç–∑—ã–≤–æ–≤)
                                </div>
                            </div>
                            <label class="clinic-select">
                                <input type="radio" name="clinic" value="${clinic.id}">
                                <span class="radio-custom"></span>
                            </label>
                        </div>
                        <div class="clinic-details">
                            <div class="clinic-address">üìç ${clinic.address}</div>
                            <div class="clinic-phone">üìû ${clinic.phone}</div>
                            <div class="clinic-hours">üïí ${clinic.workingHours}</div>
                            <div class="clinic-features">
                                ${clinic.features.map(feature => `<span class="feature-tag">${feature}</span>`).join('')}
                            </div>
                            <div class="clinic-discount">üéÅ ${clinic.discount}</div>
                            <div class="clinic-delivery">‚è±Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç—ã: ${clinic.deliveryTime}</div>
                        </div>
                    `;

                    const radio = clinicCard.querySelector('input[type="radio"]');
                    radio.addEventListener('change', (e) => {
                        if (e.target.checked) {
                            this.selectedClinic = clinic;
                            this.showNotification(`–í—ã–±—Ä–∞–Ω–∞ –∫–ª–∏–Ω–∏–∫–∞: ${clinic.name}`, 'success');
                        }
                    });

                    container.appendChild(clinicCard);
                });
            }

            updateTotalCost() {
                let total = 0;
                
                document.querySelectorAll('#analyses-checklist input[type="checkbox"]:checked').forEach(checkbox => {
                    total += parseInt(checkbox.dataset.price);
                });

                document.getElementById('total-cost').textContent = total.toLocaleString();
            }

            updateRecommendedAnalyses() {
                this.collectUserParams();
                
                // –°–Ω–∏–º–∞–µ–º –≤—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                document.querySelectorAll('.checklist-item').forEach(item => {
                    item.classList.remove('recommended');
                });

                // –ë–∞–∑–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö
                this.markAsRecommended('blood_general');
                this.markAsRecommended('blood_bio');
                this.markAsRecommended('urine_general');
                this.markAsRecommended('vitamin_d');
                this.markAsRecommended('hba1c');
                this.markAsRecommended('cholesterol');

                const age = this.userParams.age;
                const gender = this.userParams.gender;
                const goals = this.userParams.goals;

                if (age > 40) {
                    this.markAsRecommended('ecg');
                    this.markAsRecommended('ultrasound');
                }

                if (gender === 'female') {
                    this.markAsRecommended('estradiol');
                } else if (gender === 'male') {
                    this.markAsRecommended('testosterone');
                }

                if (goals.includes('hormones')) {
                    this.markAsRecommended('tsh');
                    this.markAsRecommended('cortisol');
                }

                if (goals.includes('vitamins')) {
                    this.markAsRecommended('vitamin_b12');
                    this.markAsRecommended('ferritin');
                }

                if (goals.includes('heart')) {
                    this.markAsRecommended('ecg');
                    this.markAsRecommended('crp');
                }
            }

            markAsRecommended(analysisId) {
                const item = document.querySelector(`.checklist-item input[value="${analysisId}"]`)?.closest('.checklist-item');
                if (item) {
                    item.classList.add('recommended');
                    const checkbox = item.querySelector('input[type="checkbox"]');
                    if (!checkbox.checked) {
                        checkbox.checked = true;
                        this.selectedAnalyses.add(analysisId);
                    }
                }
            }

            collectUserParams() {
                this.userParams = {
                    gender: document.querySelector('input[name="gender"]:checked').value,
                    age: parseInt(document.getElementById('age').value),
                    height: parseInt(document.getElementById('height').value),
                    weight: parseInt(document.getElementById('weight').value),
                    riskFactors: Array.from(document.querySelectorAll('input[name="risk_factors"]:checked')).map(cb => cb.value),
                    goals: Array.from(document.querySelectorAll('input[name="goals"]:checked')).map(cb => cb.value)
                };
            }

            selectAllAnalyses() {
                document.querySelectorAll('#analyses-checklist input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = true;
                    this.selectedAnalyses.add(checkbox.value);
                });
                this.updateTotalCost();
                this.showNotification('–í—Å–µ –∞–Ω–∞–ª–∏–∑—ã –≤—ã–±—Ä–∞–Ω—ã', 'success');
            }

            deselectAllAnalyses() {
                document.querySelectorAll('#analyses-checklist input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                    this.selectedAnalyses.delete(checkbox.value);
                });
                this.updateTotalCost();
                this.showNotification('–í—Å–µ –∞–Ω–∞–ª–∏–∑—ã —Å–Ω—è—Ç—ã', 'info');
            }

            showFinalResults() {
                const totalCost = Array.from(document.querySelectorAll('#analyses-checklist input[type="checkbox"]:checked'))
                    .reduce((sum, checkbox) => sum + parseInt(checkbox.dataset.price), 0);

                document.getElementById('selected-count').textContent = this.selectedAnalyses.size;
                document.getElementById('final-cost').textContent = totalCost.toLocaleString();
                document.getElementById('selected-clinic').textContent = this.selectedClinic ? this.selectedClinic.name : '–ù–µ –≤—ã–±—Ä–∞–Ω–∞';

                this.showSelectedAnalysesList();
            }

            showSelectedAnalysesList() {
                const container = document.getElementById('final-analyses-list');
                container.innerHTML = '';

                Object.values(checkupAnalyses).flat().forEach(analysis => {
                    if (this.selectedAnalyses.has(analysis.id)) {
                        const item = document.createElement('div');
                        item.className = 'analysis-item final-item';
                        item.innerHTML = `
                            <div>
                                <h4>${analysis.name}</h4>
                                <p>${analysis.description}</p>
                            </div>
                            <div class="analysis-price-final">${analysis.price} ‚ÇΩ</div>
                        `;
                        container.appendChild(item);
                    }
                });
            }

            startOver() {
                this.selectedAnalyses.clear();
                this.selectedClinic = null;
                this.userParams = {};
                
                document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
                document.querySelectorAll('input[type="radio"]').forEach(radio => radio.checked = false);
                document.querySelector('input[name="gender"][value="male"]').checked = true;
                document.getElementById('age').value = 30;
                document.getElementById('height').value = 170;
                document.getElementById('weight').value = 70;
                
                this.goToStep('1');
                this.loadAnalysesChecklist();
                this.loadClinics();
                this.showNotification('–ß–µ–∫-–ª–∏—Å—Ç —Å–±—Ä–æ—à–µ–Ω. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ.', 'info');
            }

            printPlan() {
                window.print();
                this.showNotification('–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–µ—á–∞—Ç–∏...', 'info');
            }

            savePDF() {
                this.showNotification('–§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è PDF –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è', 'info');
            }

            getCategoryName(category) {
                const names = {
                    basic: '–ë–∞–∑–æ–≤—ã–µ –∞–Ω–∞–ª–∏–∑—ã',
                    hormones: '–ì–æ—Ä–º–æ–Ω–∞–ª—å–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è',
                    vitamins: '–í–∏—Ç–∞–º–∏–Ω—ã –∏ –º–∏–∫—Ä–æ—ç–ª–µ–º–µ–Ω—Ç—ã',
                    special: '–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è'
                };
                return names[category] || category;
            }

            showNotification(message, type) {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <div class="notification-content">
                        <span class="notification-message">${message}</span>
                        <button class="notification-close">&times;</button>
                    </div>
                `;
                
                const container = document.getElementById('notification-container');
                container.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 5000);
                
                notification.querySelector('.notification-close').addEventListener('click', () => {
                    notification.remove();
                });
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            new CheckupChecklist();
        });
    </script>
</body>
</html>
